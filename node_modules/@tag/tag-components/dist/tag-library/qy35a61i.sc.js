/*! Built with http://stenciljs.com */
const{h:e}=window.TagLibrary;var t=function(e,t,s,a){return new(s||(s=Promise))(function(i,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function h(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){e.done?i(e.value):new s(function(t){t(e.value)}).then(o,h)}l((a=a.apply(e,t||[])).next())})};class s{constructor(){this.placeholder="Search for records ...",this.delay=500,this.viewMode="list",this.data=[],this.isLoading=!1,this.haveError=!1,this.setSlideOn=(()=>{if(this.element.shadowRoot){const e=this.element.shadowRoot.querySelector(".tag-search__slider");e&&e.classList.add("on")}}),this.setSlideOff=(()=>{if(this.element.shadowRoot){const e=this.element.shadowRoot.querySelector(".tag-search__slider");e&&e.classList.remove("on")}}),this.handleRecordViewClick=(()=>{this.showRecordView()}),this.handleListViewClick=(()=>{this.showListView()})}componentDidLoad(){this.showListView()}getSearch(){const e=this.getSearchBox();if(e)return this.getSearchBoxInput(e).value}setSearch(e,t){const s=this.getSearchBox();s&&(this.getSearchBoxInput(s).value=e),t||this.search.emit({criteria:e})}setData(e){this.data=e.data?e.data:e,e.error&&(this.haveError=!0);const t=this.getList();t&&t.setData(e);const s=this.getRecord();s&&s.setData(e);const a=this.getTable();a&&a.setData(e),s&&("list"===this.viewMode&&1===this.data.length?this.showRecordView():this.showListView()),this.isLoading=!1}handleSearch(){return t(this,void 0,void 0,function*(){this.haveError=!1})}handleItemSelected(e){const t=e.detail,s=this.getRecord();s&&(s.selectedIndex=t.itemIndex,this.showRecordView())}render(){const{placeholder:t,delay:s,isLoading:a,viewMode:i,data:r,borderless:o}=this,h=this.getSearch()&&!this.haveData()&&!a;return e("div",null,e("div",{class:o?"tag-search tag-search-borderless":"tag-search"},e("tag-searchbox",{class:"tag-search__search-box",placeholder:t,delay:s,borderless:o})),!a&&e("div",{class:"tag-search__slider"},e("slot",null)),a&&e("tag-progress-indeterminate",null),this.haveError&&e("tag-alert",{type:"danger"},"Sorry, a problem has occurred. Please try again"),this.haveMultipleViews()&&e("div",{class:"tag-search__view-options"},r&&r.length>0&&"list"===i&&e("button",{onClick:this.handleRecordViewClick,title:"List View"},e("tag-icon",{icon:"Doc"})),r&&r.length>0&&"record"===i&&e("button",{onClick:this.handleListViewClick,title:"Record View"},e("tag-icon",{icon:"ItemList"}))),h&&e("div",{class:"tag-search__no-items-container"},e("tag-icon",{icon:"CircleInfo",accent:"dolphinblue"}),e("span",{class:"no-items-text"},"No items to display")))}getList(){return this.element.querySelector("tag-list")}getRecord(){return this.element.querySelector("tag-record")}getTable(){return this.element.querySelector("tag-table")}showListView(){const e=this.getList();e&&(e.style.display="block");const t=this.getTable();t&&(t.style.display="block");const s=this.getRecord();s&&(s.style.display="none"),this.viewMode="list",this.setSlideOn(),setTimeout(this.setSlideOff,500)}showRecordView(){const e=this.getList();e&&(e.style.display="none");const t=this.getTable();t&&(t.style.display="none");const s=this.getRecord();s&&(s.style.display="block"),this.viewMode="record",this.setSlideOn(),setTimeout(this.setSlideOff,500)}haveMultipleViews(){let e=!1;this.getList()&&(e=!0),this.getTable()&&(e=!0);let t=!1;return this.getRecord()&&(t=!0),e&&t}getSearchBox(){return this.element.shadowRoot?this.element.shadowRoot.querySelector("tag-searchbox"):this.element.querySelector("tag-searchbox")}getSearchBoxInput(e){return e.shadowRoot?e.shadowRoot.querySelector("input"):e.querySelector("input")}haveData(){return!(!this.data||!this.data.length)&&0!==this.data.length}static get is(){return"tag-search"}static get encapsulation(){return"shadow"}static get properties(){return{borderless:{type:Boolean,attr:"borderless"},data:{state:!0},delay:{type:Number,attr:"delay"},element:{elementRef:!0},getSearch:{method:!0},haveError:{state:!0},isLoading:{state:!0},placeholder:{type:String,attr:"placeholder"},setData:{method:!0},setSearch:{method:!0},viewMode:{state:!0}}}static get events(){return[{name:"search",method:"search",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"search",method:"handleSearch"},{name:"listItemSelected",method:"handleItemSelected"}]}static get style(){return".sc-tag-search-h{font-family:sans-serif;font-size:13px;text-rendering:optimizeLegibility}.sc-tag-search-h   .tag-search.sc-tag-search{margin:0;padding:5px;background-color:#f8f8f8;border:1px solid #e2ecef}.sc-tag-search-h   .tag-search-borderless.sc-tag-search{border:0;background-color:transparent}.sc-tag-search-h   .tag-search__view-options.sc-tag-search{display:flex;flex-direction:row-reverse;align-items:center}.sc-tag-search-h   .tag-search__view-options.sc-tag-search   button.sc-tag-search{display:flex;align-items:center;cursor:pointer;margin:0;padding:0 5px;height:30px;line-height:30px;border-style:none;border-radius:2px;background-color:transparent;border-color:transparent;box-shadow:none;position:relative;box-sizing:content-box;-webkit-appearance:button;appearance:button;text-align:center;white-space:nowrap;vertical-align:middle;user-select:none;transition:color .15s ease-in-out,background-color .15s ease-in-out, border-color .15s ease-in-out,box-shadow .15s ease-in-out;text-transform:none;overflow:visible}.sc-tag-search-h   .tag-search__view-options.sc-tag-search   button.sc-tag-search:hover{background-color:#f8f8f8;border-color:#f8f8f8}.sc-tag-search-h   .tag-search__no-items-container.sc-tag-search{display:flex;align-items:center;padding:5px}.sc-tag-search-h   .tag-search__no-items-text.sc-tag-search{margin-left:3px}.sc-tag-search-h   .tag-search__slider.on.sc-tag-search{margin-left:-100px;-webkit-animation:.3s forwards slide;animation:.3s forwards slide}\@-webkit-keyframes slide{100%{margin-left:0}}\@keyframes slide{100%{margin-left:0}}"}}class a{constructor(){this.placeholder="Search for records ...",this.delay=500,this.typingTimer=null,this.handleKeyUp=(e=>{const t=e.target.value;clearTimeout(this.typingTimer),"Enter"===e.key?(this.value=t,this.search.emit({criteria:t})):(this.value=t,this.typingTimer=setTimeout(()=>{this.search.emit({criteria:t})},this.delay))}),this.handleKeyDown=(e=>{if("Tab"===e.key){const t=e.target.value;clearTimeout(this.typingTimer),this.value=t,this.search.emit({criteria:t})}})}getSearch(){return this.value}setSearch(e,t){this.value=e,t||this.search.emit({criteria:e})}render(){const{placeholder:t,value:s}=this,a=this.borderless?"tag-searchbox-borderless":"",i=this.borderless?"tag-searchbox__icon-container tag-searchbox__icon-container-borderless":"tag-searchbox__icon-container";return[e("input",{inputmode:"search",placeholder:t,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onClick:e=>this.handleClick(e),"aria-label":t,value:s,class:a}),e("span",{class:i},e("tag-icon",{icon:"Search",style:{color:"#707070"}}))]}handleClick(e){e.stopPropagation()}static get is(){return"tag-searchbox"}static get encapsulation(){return"shadow"}static get properties(){return{borderless:{type:Boolean,attr:"borderless"},delay:{type:Number,attr:"delay"},getSearch:{method:!0},placeholder:{type:String,attr:"placeholder"},setSearch:{method:!0},value:{type:String,attr:"value",mutable:!0}}}static get events(){return[{name:"search",method:"search",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return".sc-tag-searchbox-h{font-family:sans-serif;font-size:13px;text-rendering:optimizeLegibility;display:flex;flex-direction:row-reverse;margin:0;padding:0;border:0}.sc-tag-searchbox-h   .tag-searchbox-borderless.sc-tag-searchbox{border:0}.sc-tag-searchbox-h   .tag-searchbox__icon-container.sc-tag-searchbox{margin:0;padding:0 5px;background:#fff;border:1px solid #e2ecef;border-top-left-radius:2px;border-bottom-left-radius:2px;border-right:0;color:#afbac5;fill:#afbac5;text-align:center;white-space:nowrap;vertical-align:middle;box-sizing:border-box;display:flex;align-items:center;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.sc-tag-searchbox-h   .tag-searchbox__icon-container-borderless.sc-tag-searchbox{border:0}.sc-tag-searchbox-h   input.sc-tag-searchbox{width:100%;height:32px;line-height:1.42857143;font-family:Roboto,system-ui,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";font-size:13px;margin:0;z-index:0;border-color:#e2ecef;border-left:0;border-top-style:solid;border-top-width:1px;border-right-style:solid;border-right-width:1px;border-bottom-style:solid;border-bottom-width:1px;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;background-color:#fff;background-image:none;color:#7e7e81;-webkit-appearance:none;appearance:none;box-sizing:border-box;box-shadow:none;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;overflow:visible;padding:6px 42.5px 6px 3px;border-radius:0 2px 2px 0}.sc-tag-searchbox-h   input.sc-tag-searchbox::placeholder{color:#aaaab1}.sc-tag-searchbox-h   input.sc-tag-searchbox::-ms-clear{display:none}.sc-tag-searchbox-h   input.sc-tag-searchbox:focus{border-color:#bdc7d0;outline:0}.sc-tag-searchbox-h   input.sc-tag-searchbox:focus + .tag-searchbox__icon-container.sc-tag-searchbox{border-color:#bdc7d0}"}}export{s as TagSearch,a as TagSearchbox};