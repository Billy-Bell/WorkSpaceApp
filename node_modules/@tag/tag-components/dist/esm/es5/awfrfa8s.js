/*! Built with http://stenciljs.com */
import{h}from"./tag-library.core.js";import{d as mapServerValidation}from"./chunk-3e3cd362.js";import"./chunk-caf2685f.js";import"./chunk-8da4d25d.js";var TagWizard=function(){function t(){this.submitSuccessMessage="The information was successfully saved!",this.submitFailureMessage="Sorry, an unexpected error has occurred",this.submitValidationMessage="Sorry, some of the information is invalid. Please review, adjust and try again",this.serverValidationMapper=mapServerValidation,this.activeStepIndex=0}return t.prototype.componentDidLoad=function(){this.setHeightOnSteps();var t=this.getCurrentStep();t&&(this.deactivateSteps(),this.activateStep(t))},t.prototype.handlePreviousClick=function(){var t=this.getPreviousStep();t&&(this.deactivateSteps(),this.activateStep(t),this.activeStepIndex--)},t.prototype.handleNextClick=function(){var t=this.getNextStep();t&&(this.deactivateSteps(),this.activateStep(t),this.activeStepIndex++)},t.prototype.handleFinishClick=function(){var t=this.getFieldValues();this.submit.emit({body:t})},t.prototype.submitComplete=function(t){if(400===t.status){var e=this.getFieldValues(),i={};Object.keys(e).forEach(function(t){i[t]=[]}),i=this.serverValidationMapper(t,Object.keys(e)),this.getFields().forEach(function(t){var e=t;e.setErrors(i[e.name])})}this.submitResult={success:t.ok,validationError:400===t.status}},t.prototype.render=function(){return h("div",null,h("slot",null),this.submitResult&&this.submitResult.success&&h("div",{class:"tag-wizard__alert-container"},h("tag-alert",{type:"information"},this.submitSuccessMessage)),this.submitResult&&!1===this.submitResult.success&&!this.submitResult.validationError&&h("div",{class:"tag-wizard__alert-container"},h("tag-alert",{type:"danger"},this.submitFailureMessage)),this.submitResult&&!1===this.submitResult.success&&this.submitResult.validationError&&h("div",{class:"tag-wizard__alert-container"},h("tag-alert",{type:"danger"},this.submitValidationMessage)))},t.prototype.getFields=function(){var t=[].slice.call(this.element.querySelectorAll("tag-edit-field"));return[].slice.call(this.element.querySelectorAll("tag-edit-list")).forEach(function(e){var i=[].slice.call(e.shadowRoot.querySelectorAll("tag-edit-field"));t.push.apply(t,i)}),t},t.prototype.getFieldValues=function(){var t={};return this.getFields().forEach(function(e){var i=e.getAttribute("data-lname"),s=e.getAttribute("data-li");if(i&&s){var r=parseInt(s,10);for(t[i]||(t[i]=[]);t[i].length<=r;)t[i].push({});t[i][r][e.name]=e.value}else t[e.name]=e.value}),t},t.prototype.getPreviousStep=function(){var t,e=this.getSteps(),i=this.getCurrentStep();return i&&(i.previousStep?t=this.getStep(i.previousStep):this.activeStepIndex-1>=0&&(t=e[this.activeStepIndex-1])),t},t.prototype.getNextStep=function(){var t,e=this.getSteps(),i=this.getCurrentStep();return i&&(i.nextStep?t=this.getStep(i.nextStep):this.activeStepIndex+1<e.length&&(t=e[this.activeStepIndex+1])),t},t.prototype.getSteps=function(){return[].slice.call(this.element.querySelectorAll("tag-wizard-step"))},t.prototype.getCurrentStep=function(){var t,e=this.getSteps();return this.activeStepIndex<e.length&&(t=e[this.activeStepIndex]),t},t.prototype.getStep=function(t){var e=this.getSteps().filter(function(e){return e.name.toLowerCase()===t.toLowerCase()});return e.length>0?e[0]:void 0},t.prototype.deactivateSteps=function(){this.getSteps().forEach(function(t){t.style.display="none"})},t.prototype.activateStep=function(t){t.style.display="block"},t.prototype.setHeightOnSteps=function(){var t=this;if(this.height){var e=this.height&&this.height.indexOf("px")===this.height.length-2?parseInt(this.height.substr(0,this.height.length-2),10):void 0,i=e?e-60+"px":void 0;this.getSteps().forEach(function(e){var s=e.shadowRoot?e.shadowRoot.querySelector(".tag-wizard-step"):e.querySelector(".tag-wizard-step");s&&(s.style.height=t.height);var r=e.shadowRoot?e.shadowRoot.querySelector(".tag-wizard-step__content-container"):e.querySelector(".tag-wizard-step__content-container");r&&(r.style.maxHeight=i,r.style.height=i)})}},Object.defineProperty(t,"is",{get:function(){return"tag-wizard"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{activeStepIndex:{state:!0},element:{elementRef:!0},height:{type:String,attr:"height"},serverValidationMapper:{type:"Any",attr:"server-validation-mapper"},submitComplete:{method:!0},submitFailureMessage:{type:String,attr:"submit-failure-message"},submitResult:{state:!0},submitSuccessMessage:{type:String,attr:"submit-success-message"},submitValidationMessage:{type:String,attr:"submit-validation-message"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"submit",method:"submit",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"previousClick",method:"handlePreviousClick"},{name:"nextClick",method:"handleNextClick"},{name:"finishClick",method:"handleFinishClick"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return":host .tag-wizard__alert-container{margin-top:10px}"},enumerable:!0,configurable:!0}),t}();export{TagWizard};