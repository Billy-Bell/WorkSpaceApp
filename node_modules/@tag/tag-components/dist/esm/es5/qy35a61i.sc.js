/*! Built with http://stenciljs.com */
var __generator=this&&this.__generator||function(e,t){var r,a,o,i,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return n.label++,{value:i[1],done:!1};case 5:n.label++,a=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){n=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){n.label=i[1];break}if(6===i[0]&&n.label<o[1]){n.label=o[1],o=i;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(i);break}o[2]&&n.ops.pop(),n.trys.pop();continue}i=t.call(e,n)}catch(e){i=[6,e],a=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};import{h}from"./tag-library.core.js";var __awaiter=function(e,t,r,a){return new(r||(r=Promise))(function(o,i){function n(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(n,s)}c((a=a.apply(e,t||[])).next())})},TagSearch=function(){function e(){var e=this;this.placeholder="Search for records ...",this.delay=500,this.viewMode="list",this.data=[],this.isLoading=!1,this.haveError=!1,this.setSlideOn=function(){if(e.element.shadowRoot){var t=e.element.shadowRoot.querySelector(".tag-search__slider");t&&t.classList.add("on")}},this.setSlideOff=function(){if(e.element.shadowRoot){var t=e.element.shadowRoot.querySelector(".tag-search__slider");t&&t.classList.remove("on")}},this.handleRecordViewClick=function(){e.showRecordView()},this.handleListViewClick=function(){e.showListView()}}return e.prototype.componentDidLoad=function(){this.showListView()},e.prototype.getSearch=function(){var e=this.getSearchBox();if(e)return this.getSearchBoxInput(e).value},e.prototype.setSearch=function(e,t){var r=this.getSearchBox();r&&(this.getSearchBoxInput(r).value=e),t||this.search.emit({criteria:e})},e.prototype.setData=function(e){this.data=e.data?e.data:e,e.error&&(this.haveError=!0);var t=this.getList();t&&t.setData(e);var r=this.getRecord();r&&r.setData(e);var a=this.getTable();a&&a.setData(e),r&&("list"===this.viewMode&&1===this.data.length?this.showRecordView():this.showListView()),this.isLoading=!1},e.prototype.handleSearch=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.haveError=!1,[2]})})},e.prototype.handleItemSelected=function(e){var t=e.detail,r=this.getRecord();r&&(r.selectedIndex=t.itemIndex,this.showRecordView())},e.prototype.render=function(){var e=this,t=e.placeholder,r=e.delay,a=e.isLoading,o=e.viewMode,i=e.data,n=e.borderless,s=this.getSearch()&&!this.haveData()&&!a;return h("div",null,h("div",{class:n?"tag-search tag-search-borderless":"tag-search"},h("tag-searchbox",{class:"tag-search__search-box",placeholder:t,delay:r,borderless:n})),!a&&h("div",{class:"tag-search__slider"},h("slot",null)),a&&h("tag-progress-indeterminate",null),this.haveError&&h("tag-alert",{type:"danger"},"Sorry, a problem has occurred. Please try again"),this.haveMultipleViews()&&h("div",{class:"tag-search__view-options"},i&&i.length>0&&"list"===o&&h("button",{onClick:this.handleRecordViewClick,title:"List View"},h("tag-icon",{icon:"Doc"})),i&&i.length>0&&"record"===o&&h("button",{onClick:this.handleListViewClick,title:"Record View"},h("tag-icon",{icon:"ItemList"}))),s&&h("div",{class:"tag-search__no-items-container"},h("tag-icon",{icon:"CircleInfo",accent:"dolphinblue"}),h("span",{class:"no-items-text"},"No items to display")))},e.prototype.getList=function(){return this.element.querySelector("tag-list")},e.prototype.getRecord=function(){return this.element.querySelector("tag-record")},e.prototype.getTable=function(){return this.element.querySelector("tag-table")},e.prototype.showListView=function(){var e=this.getList();e&&(e.style.display="block");var t=this.getTable();t&&(t.style.display="block");var r=this.getRecord();r&&(r.style.display="none"),this.viewMode="list",this.setSlideOn(),setTimeout(this.setSlideOff,500)},e.prototype.showRecordView=function(){var e=this.getList();e&&(e.style.display="none");var t=this.getTable();t&&(t.style.display="none");var r=this.getRecord();r&&(r.style.display="block"),this.viewMode="record",this.setSlideOn(),setTimeout(this.setSlideOff,500)},e.prototype.haveMultipleViews=function(){var e=!1;this.getList()&&(e=!0),this.getTable()&&(e=!0);var t=!1;return this.getRecord()&&(t=!0),e&&t},e.prototype.getSearchBox=function(){return this.element.shadowRoot?this.element.shadowRoot.querySelector("tag-searchbox"):this.element.querySelector("tag-searchbox")},e.prototype.getSearchBoxInput=function(e){return e.shadowRoot?e.shadowRoot.querySelector("input"):e.querySelector("input")},e.prototype.haveData=function(){return!(!this.data||!this.data.length)&&0!==this.data.length},Object.defineProperty(e,"is",{get:function(){return"tag-search"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{borderless:{type:Boolean,attr:"borderless"},data:{state:!0},delay:{type:Number,attr:"delay"},element:{elementRef:!0},getSearch:{method:!0},haveError:{state:!0},isLoading:{state:!0},placeholder:{type:String,attr:"placeholder"},setData:{method:!0},setSearch:{method:!0},viewMode:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"search",method:"search",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"listeners",{get:function(){return[{name:"search",method:"handleSearch"},{name:"listItemSelected",method:"handleItemSelected"}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".sc-tag-search-h{font-family:sans-serif;font-size:13px;text-rendering:optimizeLegibility}.sc-tag-search-h   .tag-search.sc-tag-search{margin:0;padding:5px;background-color:#f8f8f8;border:1px solid #e2ecef}.sc-tag-search-h   .tag-search-borderless.sc-tag-search{border:0;background-color:transparent}.sc-tag-search-h   .tag-search__view-options.sc-tag-search{display:flex;flex-direction:row-reverse;align-items:center}.sc-tag-search-h   .tag-search__view-options.sc-tag-search   button.sc-tag-search{display:flex;align-items:center;cursor:pointer;margin:0;padding:0 5px;height:30px;line-height:30px;border-style:none;border-radius:2px;background-color:transparent;border-color:transparent;box-shadow:none;position:relative;box-sizing:content-box;-webkit-appearance:button;appearance:button;text-align:center;white-space:nowrap;vertical-align:middle;user-select:none;transition:color .15s ease-in-out,background-color .15s ease-in-out, border-color .15s ease-in-out,box-shadow .15s ease-in-out;text-transform:none;overflow:visible}.sc-tag-search-h   .tag-search__view-options.sc-tag-search   button.sc-tag-search:hover{background-color:#f8f8f8;border-color:#f8f8f8}.sc-tag-search-h   .tag-search__no-items-container.sc-tag-search{display:flex;align-items:center;padding:5px}.sc-tag-search-h   .tag-search__no-items-text.sc-tag-search{margin-left:3px}.sc-tag-search-h   .tag-search__slider.on.sc-tag-search{margin-left:-100px;-webkit-animation:.3s forwards slide;animation:.3s forwards slide}\@-webkit-keyframes slide{100%{margin-left:0}}\@keyframes slide{100%{margin-left:0}}"},enumerable:!0,configurable:!0}),e}(),TagSearchbox=function(){function e(){var e=this;this.placeholder="Search for records ...",this.delay=500,this.typingTimer=null,this.handleKeyUp=function(t){var r=t.target.value;clearTimeout(e.typingTimer),"Enter"===t.key?(e.value=r,e.search.emit({criteria:r})):(e.value=r,e.typingTimer=setTimeout(function(){e.search.emit({criteria:r})},e.delay))},this.handleKeyDown=function(t){if("Tab"===t.key){var r=t.target.value;clearTimeout(e.typingTimer),e.value=r,e.search.emit({criteria:r})}}}return e.prototype.getSearch=function(){return this.value},e.prototype.setSearch=function(e,t){this.value=e,t||this.search.emit({criteria:e})},e.prototype.render=function(){var e=this,t=this.placeholder,r=this.value,a=this.borderless?"tag-searchbox-borderless":"",o=this.borderless?"tag-searchbox__icon-container tag-searchbox__icon-container-borderless":"tag-searchbox__icon-container";return[h("input",{inputmode:"search",placeholder:t,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onClick:function(t){return e.handleClick(t)},"aria-label":t,value:r,class:a}),h("span",{class:o},h("tag-icon",{icon:"Search",style:{color:"#707070"}}))]},e.prototype.handleClick=function(e){e.stopPropagation()},Object.defineProperty(e,"is",{get:function(){return"tag-searchbox"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{borderless:{type:Boolean,attr:"borderless"},delay:{type:Number,attr:"delay"},getSearch:{method:!0},placeholder:{type:String,attr:"placeholder"},setSearch:{method:!0},value:{type:String,attr:"value",mutable:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"search",method:"search",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".sc-tag-searchbox-h{font-family:sans-serif;font-size:13px;text-rendering:optimizeLegibility;display:flex;flex-direction:row-reverse;margin:0;padding:0;border:0}.sc-tag-searchbox-h   .tag-searchbox-borderless.sc-tag-searchbox{border:0}.sc-tag-searchbox-h   .tag-searchbox__icon-container.sc-tag-searchbox{margin:0;padding:0 5px;background:#fff;border:1px solid #e2ecef;border-top-left-radius:2px;border-bottom-left-radius:2px;border-right:0;color:#afbac5;fill:#afbac5;text-align:center;white-space:nowrap;vertical-align:middle;box-sizing:border-box;display:flex;align-items:center;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.sc-tag-searchbox-h   .tag-searchbox__icon-container-borderless.sc-tag-searchbox{border:0}.sc-tag-searchbox-h   input.sc-tag-searchbox{width:100%;height:32px;line-height:1.42857143;font-family:Roboto,system-ui,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";font-size:13px;margin:0;z-index:0;border-color:#e2ecef;border-left:0;border-top-style:solid;border-top-width:1px;border-right-style:solid;border-right-width:1px;border-bottom-style:solid;border-bottom-width:1px;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;background-color:#fff;background-image:none;color:#7e7e81;-webkit-appearance:none;appearance:none;box-sizing:border-box;box-shadow:none;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;overflow:visible;padding:6px 42.5px 6px 3px;border-radius:0 2px 2px 0}.sc-tag-searchbox-h   input.sc-tag-searchbox::placeholder{color:#aaaab1}.sc-tag-searchbox-h   input.sc-tag-searchbox::-ms-clear{display:none}.sc-tag-searchbox-h   input.sc-tag-searchbox:focus{border-color:#bdc7d0;outline:0}.sc-tag-searchbox-h   input.sc-tag-searchbox:focus + .tag-searchbox__icon-container.sc-tag-searchbox{border-color:#bdc7d0}"},enumerable:!0,configurable:!0}),e}();export{TagSearch,TagSearchbox};