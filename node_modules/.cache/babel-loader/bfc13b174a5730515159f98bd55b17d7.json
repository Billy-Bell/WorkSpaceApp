{"ast":null,"code":"/*! Built with http://stenciljs.com */\nvar __generator = this && this.__generator || function (e, t) {\n  var r,\n      a,\n      n,\n      s,\n      o = {\n    label: 0,\n    sent: function sent() {\n      if (1 & n[0]) throw n[1];\n      return n[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return s = {\n    next: i(0),\n    throw: i(1),\n    return: i(2)\n  }, \"function\" == typeof Symbol && (s[Symbol.iterator] = function () {\n    return this;\n  }), s;\n\n  function i(s) {\n    return function (i) {\n      return function (s) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; o;) {\n          try {\n            if (r = 1, a && (n = 2 & s[0] ? a.return : s[0] ? a.throw || ((n = a.return) && n.call(a), 0) : a.next) && !(n = n.call(a, s[1])).done) return n;\n\n            switch (a = 0, n && (s = [2 & s[0], n.value]), s[0]) {\n              case 0:\n              case 1:\n                n = s;\n                break;\n\n              case 4:\n                return o.label++, {\n                  value: s[1],\n                  done: !1\n                };\n\n              case 5:\n                o.label++, a = s[1], s = [0];\n                continue;\n\n              case 7:\n                s = o.ops.pop(), o.trys.pop();\n                continue;\n\n              default:\n                if (!(n = (n = o.trys).length > 0 && n[n.length - 1]) && (6 === s[0] || 2 === s[0])) {\n                  o = 0;\n                  continue;\n                }\n\n                if (3 === s[0] && (!n || s[1] > n[0] && s[1] < n[3])) {\n                  o.label = s[1];\n                  break;\n                }\n\n                if (6 === s[0] && o.label < n[1]) {\n                  o.label = n[1], n = s;\n                  break;\n                }\n\n                if (n && o.label < n[2]) {\n                  o.label = n[2], o.ops.push(s);\n                  break;\n                }\n\n                n[2] && o.ops.pop(), o.trys.pop();\n                continue;\n            }\n\n            s = t.call(e, o);\n          } catch (e) {\n            s = [6, e], a = 0;\n          } finally {\n            r = n = 0;\n          }\n        }\n\n        if (5 & s[0]) throw s[1];\n        return {\n          value: s[0] ? s[1] : void 0,\n          done: !0\n        };\n      }([s, i]);\n    };\n  }\n};\n\nimport { h } from \"./tag-library.core.js\";\nimport { e as findArrayInObject } from \"./chunk-8b261813.js\";\nimport { a as variableReplacer } from \"./chunk-84f999a0.js\";\nimport { a as httpCall } from \"./chunk-8da4d25d.js\";\n\nvar responseCollectionMapper = function responseCollectionMapper(e) {\n  return {\n    data: getResponseData(e),\n    error: !1,\n    page: getResponsePage(e),\n    pageCount: getResponsePageCount(e),\n    pageSize: getResponsePageSize(e),\n    recordCount: getResponseTotalCount(e)\n  };\n},\n    getResponseData = function getResponseData(e) {\n  var t = e && e.body;\n  return void 0 === t ? void 0 : Array.isArray(t) ? t : t.data && Array.isArray(t.data) ? t.data : t.results && Array.isArray(t.results) ? t.results : findArrayInObject(t);\n},\n    getResponsePage = function getResponsePage(e) {\n  var t = e && e.body;\n  return t ? t.page ? t.page : t.pageNumber ? t.pageNumber : void 0 : void 0;\n},\n    getResponsePageSize = function getResponsePageSize(e) {\n  var t = e && e.body;\n  return t && t.pageSize ? t.pageSize : void 0;\n},\n    getResponsePageCount = function getResponsePageCount(e) {\n  var t = e && e.body;\n  return t ? t.pageCount ? t.pageCount : t.pages ? t.pages : void 0 : void 0;\n},\n    getResponseTotalCount = function getResponseTotalCount(e) {\n  var t = e && e.body;\n  return t ? t.count ? t.count : t.totalCount ? t.totalCount : t.recordCount ? t.recordCount : void 0 : void 0;\n},\n    __awaiter = function __awaiter(e, t, r, a) {\n  return new (r || (r = Promise))(function (n, s) {\n    function o(e) {\n      try {\n        h(a.next(e));\n      } catch (e) {\n        s(e);\n      }\n    }\n\n    function i(e) {\n      try {\n        h(a.throw(e));\n      } catch (e) {\n        s(e);\n      }\n    }\n\n    function h(e) {\n      e.done ? n(e.value) : new r(function (t) {\n        t(e.value);\n      }).then(o, i);\n    }\n\n    h((a = a.apply(e, t || [])).next());\n  });\n},\n    TagHttp = function () {\n  function e() {\n    this.requestEvents = \"load\", this.displayError = !1, this.requestHeaders = new Headers({\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    }), this.responseMapperAttached = !1, this.haveError = !1, this.calling = !1;\n  }\n\n  return e.prototype.componentDidLoad = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (e) {\n        switch (e.label) {\n          case 0:\n            return this.haveRequestEvent(\"load\") ? (this.method = this.method || \"get\", [4, this.makeHttpCall({\n              method: this.method,\n              path: this.path\n            })]) : [3, 2];\n\n          case 1:\n            return e.sent(), [3, 3];\n\n          case 2:\n            this.haveRequestEvent(\"submit\") && (this.method = this.method || \"post\"), e.label = 3;\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.componentDidUpdate = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (e) {\n        switch (e.label) {\n          case 0:\n            return this.responseMapperAttached || !this.responseMapper ? [3, 2] : (this.responseMapperAttached = !0, this.haveRequestEvent(\"responseMapperAttached\") ? (this.method = this.method || \"get\", [4, this.makeHttpCall({\n              method: this.method,\n              path: this.path\n            })]) : [3, 2]);\n\n          case 1:\n            e.sent(), e.label = 2;\n\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.setRequestHeader = function (e, t) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return this.requestHeaders.append(e, t), this.haveRequestEvent(\"headersAdded\") ? (this.method = this.method || \"get\", [4, this.makeHttpCall({\n              method: this.method,\n              path: this.path\n            })]) : [3, 2];\n\n          case 1:\n            r.sent(), r.label = 2;\n\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.setRequestHeaders = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t;\n      return __generator(this, function (r) {\n        switch (r.label) {\n          case 0:\n            for (t in e) {\n              e.hasOwnProperty(t) && this.requestHeaders.append(t, e[t]);\n            }\n\n            return this.haveRequestEvent(\"headersAdded\") ? (this.method = this.method || \"get\", [4, this.makeHttpCall({\n              method: this.method,\n              path: this.path\n            })]) : [3, 2];\n\n          case 1:\n            r.sent(), r.label = 2;\n\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.setRequestBody = function (e) {\n    this.requestBody = e;\n  }, e.prototype.makeHttpCall = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, r;\n      return __generator(this, function (a) {\n        switch (a.label) {\n          case 0:\n            return e || (e = {\n              body: this.requestBody,\n              headers: this.requestHeaders,\n              method: this.method,\n              path: this.path\n            }), e.headers || (e.headers = this.requestHeaders), e.body || (e.body = this.requestBody), e = this.mapRequest(e), this.calling = !0, [4, httpCall(e)];\n\n          case 1:\n            return t = a.sent(), this.calling = !1, this.haveError = !t.ok, r = this.mapResponse(e, t), this.executePostEvents(r), this.pushResultToChildren(r), [2];\n        }\n      });\n    });\n  }, e.prototype.handleSubmit = function (e) {\n    if (this.haveRequestEvent(\"submit\")) {\n      var t = e.detail;\n      t.method || (t.method = this.method), t.path || (t.path = this.path), this.makeHttpCall(t);\n    }\n  }, e.prototype.handleSearch = function (e) {\n    if (this.haveRequestEvent(\"search\")) {\n      var t = e.detail.criteria,\n          r = {\n        path: variableReplacer(this.path, {\n          search: t,\n          page: \"1\"\n        }),\n        method: this.method || \"get\"\n      };\n      this.makeHttpCall(r);\n    }\n  }, e.prototype.handlePageRequest = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, r, a;\n      return __generator(this, function (n) {\n        return this.haveRequestEvent(\"pageRequest\") && (t = e.detail, r = variableReplacer(this.path, {\n          page: t.page.toString(),\n          search: this.getSearchCriteria()\n        }), a = {\n          path: r,\n          method: this.method || \"get\"\n        }, this.makeHttpCall(a)), [2];\n      });\n    });\n  }, e.prototype.handleClick = function () {\n    if (this.haveRequestEvent(\"click\")) {\n      var e = {\n        method: this.method,\n        path: this.path\n      };\n      this.makeHttpCall(e);\n    }\n  }, e.prototype.handleButtonClick = function () {\n    if (this.haveRequestEvent(\"buttonClick\")) {\n      var e = {\n        method: this.method,\n        path: this.path\n      };\n      this.makeHttpCall(e);\n    }\n  }, e.prototype.handleGenericEvent = function (e) {\n    var t = e.detail.name;\n\n    if (this.haveRequestEvent(t)) {\n      var r = {\n        method: this.method,\n        path: this.path\n      };\n      this.makeHttpCall(r);\n    }\n  }, e.prototype.render = function () {\n    var e = this.displayError,\n        t = this.haveError,\n        r = this.calling;\n    return h(\"div\", null, h(\"slot\", null), e && t && h(\"tag-alert\", {\n      type: \"danger\"\n    }, \"Sorry, a problem has occurred. Please try again\"), r && h(\"div\", {\n      class: \"tag-http__progress-container\"\n    }, h(\"tag-progress-indeterminate\", null)));\n  }, e.prototype.haveRequestEvent = function (e) {\n    if (this.requestEvents && e) {\n      var t = this.requestEvents.split(\",\"),\n          r = !1;\n      return t.forEach(function (t) {\n        t.toLowerCase() === e.toLowerCase() && (r = !0);\n      }), r;\n    }\n\n    return !1;\n  }, e.prototype.executePostEvents = function (e) {\n    e.ok ? this.successEventName && this.event.emit({\n      args: e,\n      name: this.successEventName\n    }) : this.failureEventName && this.event.emit({\n      args: e,\n      name: this.failureEventName\n    }), this.responded.emit(e);\n  }, e.prototype.mapRequest = function (e) {\n    return this.requestMapper ? this.requestMapper(e) : e;\n  }, e.prototype.mapResponse = function (e, t) {\n    if (this.responseMapper) return this.responseMapper(t);\n\n    if (\"get\" === e.method) {\n      var r = responseCollectionMapper(t);\n      return r && (t.body = r), t;\n    }\n\n    return t;\n  }, e.prototype.pushResultToChildren = function (e) {\n    if (this.element.childNodes && this.element.childNodes.length > 0) for (var t = 0; t < this.element.childNodes.length; t++) {\n      var r = this.element.childNodes[t];\n      if (this.haveRequestEvent(\"submit\") && r.submitComplete && r.submitComplete(e), r.setData) r.setData(e.body);else if (r.children && r.children.length > 0) for (var a = 0, n = r.children; a < n.length; a++) {\n        var s = n[a];\n        s.setData && s.setData(e.body);\n      }\n    }\n  }, e.prototype.getSearchCriteria = function () {\n    var e = this.element.querySelector(\"tag-search\");\n    return e && e.getSearch ? e.getSearch() : \"\";\n  }, Object.defineProperty(e, \"is\", {\n    get: function get() {\n      return \"tag-http\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e, \"encapsulation\", {\n    get: function get() {\n      return \"shadow\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e, \"properties\", {\n    get: function get() {\n      return {\n        calling: {\n          state: !0\n        },\n        displayError: {\n          type: Boolean,\n          attr: \"display-error\"\n        },\n        element: {\n          elementRef: !0\n        },\n        failureEventName: {\n          type: String,\n          attr: \"failure-event-name\"\n        },\n        haveError: {\n          state: !0\n        },\n        makeHttpCall: {\n          method: !0\n        },\n        method: {\n          type: String,\n          attr: \"method\",\n          mutable: !0\n        },\n        path: {\n          type: String,\n          attr: \"path\"\n        },\n        requestEvents: {\n          type: String,\n          attr: \"request-events\"\n        },\n        requestMapper: {\n          type: \"Any\",\n          attr: \"request-mapper\"\n        },\n        responseMapper: {\n          type: \"Any\",\n          attr: \"response-mapper\"\n        },\n        setRequestBody: {\n          method: !0\n        },\n        setRequestHeader: {\n          method: !0\n        },\n        setRequestHeaders: {\n          method: !0\n        },\n        successEventName: {\n          type: String,\n          attr: \"success-event-name\"\n        }\n      };\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e, \"events\", {\n    get: function get() {\n      return [{\n        name: \"event\",\n        method: \"event\",\n        bubbles: !0,\n        cancelable: !0,\n        composed: !0\n      }, {\n        name: \"responded\",\n        method: \"responded\",\n        bubbles: !0,\n        cancelable: !0,\n        composed: !0\n      }];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e, \"listeners\", {\n    get: function get() {\n      return [{\n        name: \"submit\",\n        method: \"handleSubmit\"\n      }, {\n        name: \"search\",\n        method: \"handleSearch\"\n      }, {\n        name: \"pageRequest\",\n        method: \"handlePageRequest\"\n      }, {\n        name: \"click\",\n        method: \"handleClick\"\n      }, {\n        name: \"buttonClick\",\n        method: \"handleButtonClick\"\n      }, {\n        name: \"event\",\n        method: \"handleGenericEvent\"\n      }];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e, \"style\", {\n    get: function get() {\n      return \".sc-tag-http-h   tag-http__progress-container.sc-tag-http{position:fixed}\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e;\n}();\n\nexport { TagHttp };","map":null,"metadata":{},"sourceType":"module"}