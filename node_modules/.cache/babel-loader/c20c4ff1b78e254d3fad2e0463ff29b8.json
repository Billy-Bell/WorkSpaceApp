{"ast":null,"code":"/*! Built with http://stenciljs.com */\nimport { h } from \"./tag-library.core.js\";\nimport { d as mapServerValidation } from \"./chunk-3e3cd362.js\";\nimport \"./chunk-caf2685f.js\";\nimport \"./chunk-8da4d25d.js\";\n\nvar TagWizard = function () {\n  function t() {\n    this.submitSuccessMessage = \"The information was successfully saved!\", this.submitFailureMessage = \"Sorry, an unexpected error has occurred\", this.submitValidationMessage = \"Sorry, some of the information is invalid. Please review, adjust and try again\", this.serverValidationMapper = mapServerValidation, this.activeStepIndex = 0;\n  }\n\n  return t.prototype.componentDidLoad = function () {\n    this.setHeightOnSteps();\n    var t = this.getCurrentStep();\n    t && (this.deactivateSteps(), this.activateStep(t));\n  }, t.prototype.handlePreviousClick = function () {\n    var t = this.getPreviousStep();\n    t && (this.deactivateSteps(), this.activateStep(t), this.activeStepIndex--);\n  }, t.prototype.handleNextClick = function () {\n    var t = this.getNextStep();\n    t && (this.deactivateSteps(), this.activateStep(t), this.activeStepIndex++);\n  }, t.prototype.handleFinishClick = function () {\n    var t = this.getFieldValues();\n    this.submit.emit({\n      body: t\n    });\n  }, t.prototype.submitComplete = function (t) {\n    if (400 === t.status) {\n      var e = this.getFieldValues(),\n          i = {};\n      Object.keys(e).forEach(function (t) {\n        i[t] = [];\n      }), i = this.serverValidationMapper(t, Object.keys(e)), this.getFields().forEach(function (t) {\n        var e = t;\n        e.setErrors(i[e.name]);\n      });\n    }\n\n    this.submitResult = {\n      success: t.ok,\n      validationError: 400 === t.status\n    };\n  }, t.prototype.render = function () {\n    return h(\"div\", null, h(\"slot\", null), this.submitResult && this.submitResult.success && h(\"div\", {\n      class: \"tag-wizard__alert-container\"\n    }, h(\"tag-alert\", {\n      type: \"information\"\n    }, this.submitSuccessMessage)), this.submitResult && !1 === this.submitResult.success && !this.submitResult.validationError && h(\"div\", {\n      class: \"tag-wizard__alert-container\"\n    }, h(\"tag-alert\", {\n      type: \"danger\"\n    }, this.submitFailureMessage)), this.submitResult && !1 === this.submitResult.success && this.submitResult.validationError && h(\"div\", {\n      class: \"tag-wizard__alert-container\"\n    }, h(\"tag-alert\", {\n      type: \"danger\"\n    }, this.submitValidationMessage)));\n  }, t.prototype.getFields = function () {\n    var t = [].slice.call(this.element.querySelectorAll(\"tag-edit-field\"));\n    return [].slice.call(this.element.querySelectorAll(\"tag-edit-list\")).forEach(function (e) {\n      var i = [].slice.call(e.shadowRoot.querySelectorAll(\"tag-edit-field\"));\n      t.push.apply(t, i);\n    }), t;\n  }, t.prototype.getFieldValues = function () {\n    var t = {};\n    return this.getFields().forEach(function (e) {\n      var i = e.getAttribute(\"data-lname\"),\n          s = e.getAttribute(\"data-li\");\n\n      if (i && s) {\n        var r = parseInt(s, 10);\n\n        for (t[i] || (t[i] = []); t[i].length <= r;) {\n          t[i].push({});\n        }\n\n        t[i][r][e.name] = e.value;\n      } else t[e.name] = e.value;\n    }), t;\n  }, t.prototype.getPreviousStep = function () {\n    var t,\n        e = this.getSteps(),\n        i = this.getCurrentStep();\n    return i && (i.previousStep ? t = this.getStep(i.previousStep) : this.activeStepIndex - 1 >= 0 && (t = e[this.activeStepIndex - 1])), t;\n  }, t.prototype.getNextStep = function () {\n    var t,\n        e = this.getSteps(),\n        i = this.getCurrentStep();\n    return i && (i.nextStep ? t = this.getStep(i.nextStep) : this.activeStepIndex + 1 < e.length && (t = e[this.activeStepIndex + 1])), t;\n  }, t.prototype.getSteps = function () {\n    return [].slice.call(this.element.querySelectorAll(\"tag-wizard-step\"));\n  }, t.prototype.getCurrentStep = function () {\n    var t,\n        e = this.getSteps();\n    return this.activeStepIndex < e.length && (t = e[this.activeStepIndex]), t;\n  }, t.prototype.getStep = function (t) {\n    var e = this.getSteps().filter(function (e) {\n      return e.name.toLowerCase() === t.toLowerCase();\n    });\n    return e.length > 0 ? e[0] : void 0;\n  }, t.prototype.deactivateSteps = function () {\n    this.getSteps().forEach(function (t) {\n      t.style.display = \"none\";\n    });\n  }, t.prototype.activateStep = function (t) {\n    t.style.display = \"block\";\n  }, t.prototype.setHeightOnSteps = function () {\n    var t = this;\n\n    if (this.height) {\n      var e = this.height && this.height.indexOf(\"px\") === this.height.length - 2 ? parseInt(this.height.substr(0, this.height.length - 2), 10) : void 0,\n          i = e ? e - 60 + \"px\" : void 0;\n      this.getSteps().forEach(function (e) {\n        var s = e.shadowRoot ? e.shadowRoot.querySelector(\".tag-wizard-step\") : e.querySelector(\".tag-wizard-step\");\n        s && (s.style.height = t.height);\n        var r = e.shadowRoot ? e.shadowRoot.querySelector(\".tag-wizard-step__content-container\") : e.querySelector(\".tag-wizard-step__content-container\");\n        r && (r.style.maxHeight = i, r.style.height = i);\n      });\n    }\n  }, Object.defineProperty(t, \"is\", {\n    get: function get() {\n      return \"tag-wizard\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t, \"encapsulation\", {\n    get: function get() {\n      return \"shadow\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t, \"properties\", {\n    get: function get() {\n      return {\n        activeStepIndex: {\n          state: !0\n        },\n        element: {\n          elementRef: !0\n        },\n        height: {\n          type: String,\n          attr: \"height\"\n        },\n        serverValidationMapper: {\n          type: \"Any\",\n          attr: \"server-validation-mapper\"\n        },\n        submitComplete: {\n          method: !0\n        },\n        submitFailureMessage: {\n          type: String,\n          attr: \"submit-failure-message\"\n        },\n        submitResult: {\n          state: !0\n        },\n        submitSuccessMessage: {\n          type: String,\n          attr: \"submit-success-message\"\n        },\n        submitValidationMessage: {\n          type: String,\n          attr: \"submit-validation-message\"\n        }\n      };\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t, \"events\", {\n    get: function get() {\n      return [{\n        name: \"submit\",\n        method: \"submit\",\n        bubbles: !0,\n        cancelable: !0,\n        composed: !0\n      }];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t, \"listeners\", {\n    get: function get() {\n      return [{\n        name: \"previousClick\",\n        method: \"handlePreviousClick\"\n      }, {\n        name: \"nextClick\",\n        method: \"handleNextClick\"\n      }, {\n        name: \"finishClick\",\n        method: \"handleFinishClick\"\n      }];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t, \"style\", {\n    get: function get() {\n      return \":host .tag-wizard__alert-container{margin-top:10px}\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t;\n}();\n\nexport { TagWizard };","map":null,"metadata":{},"sourceType":"module"}